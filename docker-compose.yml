version: '3.8'

services:
  position-copier:
    build: .
    container_name: hyperliquid-position-copier
    restart: unless-stopped
    environment:
      - AGENT_PRIVATE_KEY=${AGENT_PRIVATE_KEY}
      - MAIN_ACCOUNT_ADDRESS=${MAIN_ACCOUNT_ADDRESS}
      - TARGET_ADDRESS=${TARGET_ADDRESS}
      - COPY_MODE=${COPY_MODE:-proportional}
      - COPY_RATIO=${COPY_RATIO:-1.0}
      - MAX_POSITION_PCT=${MAX_POSITION_PCT:-30.0}
    env_file:
      - .env
    command: python position_copier.py
    # Uncomment below for other scripts
    # command: python hyperliquid_monitor.py
    # command: python hyperliquid_leverage_monitor.py
    # command: python address_tracker.py

  # Uncomment to run multiple services
  # monitor:
  #   build: .
  #   container_name: hyperliquid-monitor
  #   restart: unless-stopped
  #   env_file:
  #     - .env
  #   command: python hyperliquid_monitor.py

  # leverage-monitor:
  #   build: .
  #   container_name: hyperliquid-leverage-monitor
  #   restart: unless-stopped
  #   env_file:
  #     - .env
  #   command: python hyperliquid_leverage_monitor.py

  # address-tracker:
  #   build: .
  #   container_name: hyperliquid-address-tracker
  #   restart: unless-stopped
  #   env_file:
  #     - .env
  #   command: python address_tracker.py

